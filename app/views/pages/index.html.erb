<%# Hero-First Editorial Homepage Design %>

<div class="animate-[fadeIn_0.8s_ease-out]" data-controller="search">
  <!-- Hero Section -->
  <section class="min-h-0 md:min-h-[70vh] flex flex-col items-center justify-start md:justify-center px-4 pt-6 pb-8 md:py-16 relative">
    <!-- Hero Content -->
    <div class="text-center max-w-4xl mx-auto">
      <!-- Main Title -->
      <h1 class="text-4xl sm:text-5xl md:text-7xl lg:text-8xl font-black mb-4 md:mb-6 tracking-tight uppercase animate-[fadeInUp_0.8s_ease-out]">
        <span class="bg-gradient-to-r from-lol-gold via-lol-gold-300 to-lol-gold bg-clip-text text-transparent drop-shadow-[0_0_40px_rgba(196,161,91,0.6)] animate-[glowPulse_3s_ease-in-out_infinite]">
          League Rosters
        </span>
      </h1>

      <!-- Subtitle -->
      <p class="text-gray-300 text-base sm:text-lg md:text-2xl font-medium mb-4 md:mb-8 animate-[fadeInUp_0.8s_ease-out_0.1s_both]">
        Your complete guide to professional League of Legends teams & players
      </p>

      <!-- Stats Line -->
      <p class="text-gray-400 text-sm md:text-base mb-6 md:mb-10 animate-[fadeInUp_0.8s_ease-out_0.2s_both]">
        <span class="text-lol-gold font-semibold"><%= @all_teams.count %></span> teams
        <span class="mx-2 text-gray-600">â€¢</span>
        <span class="text-lol-gold font-semibold"><%= @teams_by_region.keys.count %></span> competitive regions
      </p>

      <!-- Search Bar -->
      <div class="max-w-xl mx-auto animate-[fadeInUp_0.8s_ease-out_0.3s_both] relative">
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none">
            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
          <input type="text"
                 data-search-target="input"
                 data-action="input->search#filter"
                 placeholder="Search teams or players..."
                 class="w-full pl-12 pr-12 py-4 bg-gray-800/40 backdrop-blur-md border border-gray-600/50
                        rounded-xl text-gray-100 placeholder-gray-500 text-lg
                        focus:outline-none focus:ring-2 focus:ring-lol-gold/50 focus:border-lol-gold/50
                        shadow-lg hover:shadow-glow-sm transition-all duration-300">
          <!-- Clear Button -->
          <button type="button"
                  data-search-target="clearButton"
                  data-action="click->search#clear"
                  class="hidden absolute inset-y-0 right-0 pr-5 flex items-center text-gray-400 hover:text-lol-gold transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>

        <!-- Search Results Preview Dropdown -->
        <div data-search-target="preview"
             class="hidden absolute top-full left-0 right-0 mt-2 max-h-80 overflow-y-auto
                    bg-gray-800/95 backdrop-blur-md border border-gray-600/50 rounded-xl
                    shadow-2xl z-50">
          <div data-search-target="previewResults" class="p-2">
            <!-- Results will be dynamically inserted here -->
          </div>
          <div data-search-target="previewEmpty" class="hidden p-4 text-center text-gray-400">
            No teams or players found
          </div>
          <div data-search-target="previewFooter" class="hidden border-t border-gray-700/50 p-3">
            <button type="button"
                    data-action="click->search#scrollToResults"
                    class="w-full text-sm text-lol-gold hover:text-lol-gold-300 transition-colors">
              View all results below
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scroll Indicator (desktop only) -->
    <div class="hidden md:block absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce">
      <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
      </svg>
    </div>
  </section>

  <% if @all_teams.any? %>
    <!-- Featured Regions Section -->
    <section class="px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 md:py-12 animate-[fadeInUp_0.8s_ease-out_0.4s_both]">
      <div class="max-w-7xl mx-auto">
        <!-- Section Header -->
        <div class="text-center mb-4 md:mb-8">
          <h2 class="text-2xl md:text-3xl font-bold text-white mb-2">Competitive Regions</h2>
          <p class="text-gray-400">Explore teams by their competitive league</p>
        </div>

        <!-- Region Cards - Improved horizontal scroll on mobile, grid on desktop -->
        <div class="flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4
                    md:grid md:grid-cols-4 lg:grid-cols-5 md:overflow-visible
                    scrollbar-hide
                    -mx-4 sm:-mx-6 lg:-mx-8 xl:-mx-12 2xl:-mx-16
                    px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16
                    md:mx-0 md:px-0">
          <% @teams_by_region.each do |region, teams| %>
            <% region_colors = region_color_config(region) %>
            <button type="button"
                    data-action="click->search#filterByRegion"
                    data-region="<%= region %>"
                    class="snap-center shrink-0 w-44 min-h-[100px] p-5 rounded-xl
                           bg-gray-800/30 backdrop-blur-sm border <%= region_colors[:border] %>
                           <%= region_colors[:hover_border] %> hover:bg-gray-800/50
                           transition-all duration-300 hover:scale-[1.02] hover:shadow-lg
                           text-left group cursor-pointer
                           md:w-auto">
              <!-- Region Name -->
              <h3 class="text-lg font-bold <%= region_colors[:badge_text] %> mb-1 group-hover:brightness-110 transition-all">
                <%= region %>
              </h3>
              <!-- Team Count -->
              <p class="text-gray-400 text-sm">
                <span class="font-semibold text-white"><%= teams.count %></span> team<%= teams.count != 1 ? 's' : '' %>
              </p>
            </button>
          <% end %>
        </div>
      </div>
    </section>

    <!-- Results Counter -->
    <div class="px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-4">
      <div class="max-w-7xl mx-auto">
        <div class="flex items-center justify-between">
          <span data-search-target="resultCount" class="text-sm text-gray-400">
            Showing all <%= @all_teams.count %> teams
          </span>
          <!-- Active Region Filter (hidden by default) -->
          <span data-search-target="activeFilter" class="hidden text-sm text-lol-gold flex items-center gap-2">
            <span data-search-target="activeFilterText"></span>
            <button type="button" data-action="click->search#clearRegionFilter" class="hover:text-white transition-colors">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </span>
        </div>
      </div>
    </div>

    <!-- Teams Grid Section -->
    <section class="px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 pb-8 md:pb-16">
      <div class="max-w-7xl mx-auto">
        <!-- Teams Grid - Responsive with larger cards -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6">
          <% @all_teams.each do |team| %>
            <div data-search-target="card" data-region="<%= team.region %>">
              <%= render 'shared/team_card', team: team, mode: 'editorial' %>
            </div>
          <% end %>
        </div>
      </div>
    </section>
  <% else %>
    <!-- Empty State -->
    <section class="px-4 sm:px-6 lg:px-8 py-20">
      <div class="max-w-md mx-auto text-center">
        <div class="bg-gray-800/30 backdrop-blur-sm border border-gray-700/50 rounded-xl p-12">
          <svg class="w-16 h-16 mx-auto mb-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
          </svg>
          <h3 class="text-xl font-bold text-gray-400 mb-2">No Teams Yet</h3>
          <p class="text-gray-500 text-sm">
            Teams will appear here once they're synced from Team Sources.
          </p>
        </div>
      </div>
    </section>
  <% end %>
</div>
